{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixarbay-api.js","../src/main.js"],"sourcesContent":["//У файлі render-functions.js створи функції для відображення елементів інтерфейсу.\n\nexport function createGalleryMarkup(array) {\n  return array\n    .map(\n      image =>\n        `<li class=\"gallery-item\">\n          <a href=\"${image.largeImageURL}\" alt=\"${image.tags}\">\n              <img src=\"${image.webformatURL}\" >\n          </a>\n              <div>\n              <table>\n                  <thead>\n                      <tr>\n                          <th>Likes</th>\n                          <th>Views</th>\n                          <th>Comments</th>\n                          <th>Downloads</th>\n                      </tr>\n                  </thead>\n                  <tbody>\n                      <tr>\n                          <td>${image.likes}</td>\n                          <td>${image.views}</td>\n                          <td>${image.comments}</td>\n                          <td>${image.downloads}</td>\n                      </tr>\n                  </tbody>\n                  </table>\n              </div>\n         </li>`\n    )\n    .join('');\n}\n","// У файлі pixabay-api.js зберігай функції для HTTP-запитів.\n\n//У разі пошуку за новим ключовим словом значення page потрібно повернути до початкового, оскільки буде пагінація для нової колекції зображень.\n\nexport function getPhotos(q, page) {\n  const baseUrl = 'https://pixabay.com/api';\n  const API_KEY = '43362047-b69de0f8b7d88fd6ec05c5589';\n\n  const params = new URLSearchParams({\n    key: API_KEY,\n    q,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    page,\n    per_page: 15,\n  });\n\n  page++;\n\n  return fetch(`${baseUrl}/?${params}`).then(res => {\n    if (!res.ok) {\n      throw new Error(res.status);\n      //   if(res)\n    }\n    return res.json();\n  });\n}\n\n////====////\n\n// export function getPhotos(q) {\n//   const baseUrl = 'https://pixabay.com/api';\n//   const API_KEY = '43362047-b69de0f8b7d88fd6ec05c5589';\n\n//   const params = new URLSearchParams({\n//     key: API_KEY,\n//     q,\n//     image_type: 'photo',\n//     orientation: 'horizontal',\n//     safesearch: true,\n//   });\n//   return fetch(`${baseUrl}/?${params}`).then(res => {\n//     if (!res.ok) {\n//       throw new Error(res.status);\n//       //   if(res)\n//     }\n//     return res.json();\n//   });\n// }\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { createGalleryMarkup } from './js/render-functions';\nimport { getPhotos } from './js/pixarbay-api';\n\nimport axios from 'axios';\n\nconst formElement = document.querySelector('[name=\"search\"]');\nconst inputElement = document.querySelector('input');\nconst galleryArea = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nlet lightbox;\nconst btnLoadMore = document.querySelector('.js-button-load');\nlet searchQuery = null;\nlet page = 1;\n\nif (!lightbox) {\n  lightbox = new SimpleLightbox('.gallery a');\n} else {\n  lightbox.refresh();\n}\n\nconst limit = 15;\nconst totalImages = null;\nconst lastPage = Math.ceil(totalImages / 15);\n\nformElement.addEventListener('submit', onSubmit);\nbtnLoadMore.addEventListener('click', loadedMoreImages);\n\nfunction loadedMoreImages() {\n  page += 1;\n\n  getPhotos(searchQuery, page)\n    .then(res => {\n      galleryArea.insertAdjacentHTML(\n        'beforeend',\n        createGalleryMarkup(res.hits)\n      );\n      const { height: cardHeight } = document\n        .querySelector('.gallery')\n        .firstElementChild.getBoundingClientRect();\n\n      window.scrollBy({\n        top: cardHeight * 2,\n        behavior: 'smooth',\n      });\n      const lastPage = Math.ceil(res.total / 15);\n      ///????\n      if (lastPage === page) {\n        btnLoadMore.classList.add('is-hidden');\n        alert(\"that's all!!!\");\n        // iziToast;\n      }\n    })\n    .catch(console.log);\n}\n\n////----////\n\n////----////\n\nfunction onSubmit(event) {\n  event.preventDefault();\n\n  searchQuery = event.currentTarget.elements.search.value.trim();\n  showLoader();\n  btnLoadMore.classList.add('is-hidden');\n  galleryArea.innerHTML = '';\n  page = 1;\n\n  if (!searchQuery) return;\n\n  getPhotos(searchQuery, page) //\n    .then(res => {\n      if (res.total > 0) {\n        iziToast.info({\n          position: 'topRight',\n          message: `We found ${res.total} images`,\n          maxWidth: '432',\n        });\n      }\n      if (res.hits.length === 0) {\n        return iziToast.error({\n          position: 'topRight',\n\n          message:\n            'Sorry, there are no images matching your search query. Please try again!',\n          maxWidth: '432',\n          messageColor: '#fafafb',\n          color: '#ef4040',\n        });\n      }\n\n      galleryArea.innerHTML = createGalleryMarkup(res.hits);\n\n      if (res.totalHits > 15) {\n        btnLoadMore.classList.remove('is-hidden');\n      }\n    })\n    .catch(err => {\n      console.log(err);\n    })\n    .finally(() => {\n      hiddeLoader();\n    });\n  inputElement.value = '';\n}\n\n////----////\n\nfunction showLoader() {\n  loader.classList.remove('is-hidden');\n}\n\nfunction hiddeLoader() {\n  loader.classList.add('is-hidden');\n}\n"],"names":["createGalleryMarkup","array","image","getPhotos","q","page","baseUrl","API_KEY","params","res","formElement","inputElement","galleryArea","loader","lightbox","btnLoadMore","searchQuery","SimpleLightbox","onSubmit","loadedMoreImages","cardHeight","event","showLoader","iziToast","err","hiddeLoader"],"mappings":"6vBAEO,SAASA,EAAoBC,EAAO,CACzC,OAAOA,EACJ,IACCC,GACE;AAAA,qBACaA,EAAM,aAAa,UAAUA,EAAM,IAAI;AAAA,0BAClCA,EAAM,YAAY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gCAcZA,EAAM,KAAK;AAAA,gCACXA,EAAM,KAAK;AAAA,gCACXA,EAAM,QAAQ;AAAA,gCACdA,EAAM,SAAS;AAAA;AAAA;AAAA;AAAA;AAAA,eAM1C,EACA,KAAK,EAAE,CACZ,CC7BO,SAASC,EAAUC,EAAGC,EAAM,CACjC,MAAMC,EAAU,0BACVC,EAAU,qCAEVC,EAAS,IAAI,gBAAgB,CACjC,IAAKD,EACL,EAAAH,EACA,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAAC,EACA,SAAU,EACd,CAAG,EAED,OAAAA,IAEO,MAAM,GAAGC,CAAO,KAAKE,CAAM,EAAE,EAAE,KAAKC,GAAO,CAChD,GAAI,CAACA,EAAI,GACP,MAAM,IAAI,MAAMA,EAAI,MAAM,EAG5B,OAAOA,EAAI,MACf,CAAG,CACH,CClBA,MAAMC,EAAc,SAAS,cAAc,iBAAiB,EACtDC,EAAe,SAAS,cAAc,OAAO,EAC7CC,EAAc,SAAS,cAAc,UAAU,EAC/CC,EAAS,SAAS,cAAc,SAAS,EAC/C,IAAIC,EACJ,MAAMC,EAAc,SAAS,cAAc,iBAAiB,EAC5D,IAAIC,EAAc,KACdX,EAAO,EAENS,EAGHA,EAAS,QAAO,EAFhBA,EAAW,IAAIG,EAAe,YAAY,EAS5CP,EAAY,iBAAiB,SAAUQ,CAAQ,EAC/CH,EAAY,iBAAiB,QAASI,CAAgB,EAEtD,SAASA,GAAmB,CAC1Bd,GAAQ,EAERF,EAAUa,EAAaX,CAAI,EACxB,KAAKI,GAAO,CACXG,EAAY,mBACV,YACAZ,EAAoBS,EAAI,IAAI,CACpC,EACM,KAAM,CAAE,OAAQW,CAAU,EAAK,SAC5B,cAAc,UAAU,EACxB,kBAAkB,sBAAqB,EAE1C,OAAO,SAAS,CACd,IAAKA,EAAa,EAClB,SAAU,QAClB,CAAO,EACgB,KAAK,KAAKX,EAAI,MAAQ,EAAE,IAExBJ,IACfU,EAAY,UAAU,IAAI,WAAW,EACrC,MAAM,eAAe,EAG7B,CAAK,EACA,MAAM,QAAQ,GAAG,CACtB,CAMA,SAASG,EAASG,EAAO,CACvBA,EAAM,eAAc,EAEpBL,EAAcK,EAAM,cAAc,SAAS,OAAO,MAAM,OACxDC,IACAP,EAAY,UAAU,IAAI,WAAW,EACrCH,EAAY,UAAY,GACxBP,EAAO,EAEFW,IAELb,EAAUa,EAAaX,CAAI,EACxB,KAAKI,GAAO,CAQX,GAPIA,EAAI,MAAQ,GACdc,EAAS,KAAK,CACZ,SAAU,WACV,QAAS,YAAYd,EAAI,KAAK,UAC9B,SAAU,KACpB,CAAS,EAECA,EAAI,KAAK,SAAW,EACtB,OAAOc,EAAS,MAAM,CACpB,SAAU,WAEV,QACE,2EACF,SAAU,MACV,aAAc,UACd,MAAO,SACjB,CAAS,EAGHX,EAAY,UAAYZ,EAAoBS,EAAI,IAAI,EAEhDA,EAAI,UAAY,IAClBM,EAAY,UAAU,OAAO,WAAW,CAEhD,CAAK,EACA,MAAMS,GAAO,CACZ,QAAQ,IAAIA,CAAG,CACrB,CAAK,EACA,QAAQ,IAAM,CACbC,GACN,CAAK,EACHd,EAAa,MAAQ,GACvB,CAIA,SAASW,GAAa,CACpBT,EAAO,UAAU,OAAO,WAAW,CACrC,CAEA,SAASY,GAAc,CACrBZ,EAAO,UAAU,IAAI,WAAW,CAClC"}